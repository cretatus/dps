<div class="jumbotron text-center">
    <div class="container">
    	<div ng-show="tableView" class="tableScroll">
			<table width="100%">
				<tr>
					<td align="left"><h4>Assemblies:</h4></td>
					<td align="right">
			    		<button ng-click="addAssembly()" type="button" class="btn btn-success" >
							<span class="glyphicon glyphicon-plus" aria-hidden="true"> Add assembly</span>
						</button>
					</td>
				</tr>
			</table>
			<p></p>
			<table class="table table-bordered">
				<thead>
					<tr>
						<th>ID</th>
						<th>Name</th>
						<th>Sysname</th>
						<th>Description</th>
						<th style="width:230px;">Command</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="assembly in assemblies | orderBy:'assembly.name'"
						ng-class="{'selected':$index == selectedRow}" ng-click="showBuild($index, assembly)">
						<td>{{assembly.id}}</td>
						<td>{{assembly.name}}</td>
						<td>{{assembly.sysname}}</td>
						<td>{{assembly.description}}</td>
						<td width="160">
							<button ng-click="addBuild(assembly)" type="button" class="btn btn-warning" data-tooltip="Build">
								<span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>
							</button>
							<button ng-click="editAssembly(assembly)" type="button" class="btn btn-warning" data-tooltip="Edit">
									<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
							</button>
							<button ng-click="removeAssembly(assembly)" type="button" class="btn btn-danger" data-tooltip="Remove">
								<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
							</button>
						</td>
					</tr>
				</tbody>
			</table>
			<br/>
			<table width="100%" ng-show="assembly.id">
				<tr>
					<td align="left"><h4>Builds:</h4></td>
				</tr>
			</table>
			<p></p>
			<table class="table table-bordered" ng-show="assembly.id">
				<thead>
					<tr>
						<th>ID</th>
						<th>Number</th>
						<th>Time</th>
						<th>Description</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="build in builds|filter:{assembly:{id:assembly.id}}|orderBy:'onTime':true">
						<td>{{build.id}}</td>
						<td>{{build.number}}</td>
						<td>{{build.onTime | date: "dd.MM.yyyy HH:mm:ss"}}</td>
						<td>{{build.description}}</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div ng-show="(addAssemblyView || editAssemblyView) && !addVersionView">
			<h3 ng-show="editAssemblyView">Edit assembly</h3>
			<h3 ng-show="addAssemblyView">Create new assembly</h3>
			<form role="form" ng-submit="saveAssembly()">
				<div ng-show="editAssemblyView">
					<label>ID: {{assembly.id}}</label>
				</div>
				<div class="form-group margin-form" style="width:300px;">
					<label for="name" required>Name:</label>
					<input type="text" class="form-control" id="name" name="name" required
						ng-model="assembly.name"/>
				</div>
				<div class="form-group margin-form" style="width:300px;">
					<label for="name" required>Sysname:</label>
					<input type="text" class="form-control" id="name" name="name" ng-pattern="regexSysname" required 
						ng-model="assembly.sysname"/>
				</div>
				<div class="form-group margin-form" style="width:300px;">
					<label for="name" required>Description:</label>
					<input type="text" class="form-control" id="name" name="name" ng-model="assembly.description"/>
				</div>
				<p></p>
				<table width="100%">
					<tr>
						<td align="left"><h4>Module versions:</h4></td>
						<td align="right">
				    		<button ng-click="addVersion()" type="button" class="btn btn-success">
								<span class="glyphicon glyphicon-plus" aria-hidden="true"> Add module version</span>
							</button>
						</td>
					</tr>
				</table>
				<p></p>
				<table class="table table-striped table-bordered .table-condensed">
					<thead>
						<tr>
							<th>ID</th>
							<th>Module</th>
							<th>Version</th>
							<th>Influencers</th>
							<th style="width:230px;">Command</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="version in assembly.versions|orderBy:'number'">
							<td>{{version.id}}</td>
							<td>{{version.module.name}}</td>
							<td>{{version.name}}</td>
							<td>{{version.influensers}}</td>
							<td width="160">
								<button ng-click="removeVersion(version)" type="button" class="btn btn-danger" data-tooltip="Remove">
									<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
								</button>
							</td>
						</tr>
					</tbody>
				</table>
				<br/>
				<div class="row form-group margin-form">
					<div class="col-lg-6 text-right">
						<button ng-click="show()" type="button" class="btn btn-success">
							<span class="glyphicon glyphicon-arrow-left" aria-hidden="true"> Back</span>
						</button>
					</div>
					<div class="col-lg-6 text-left">
						<button type="submit" class="btn btn-success">
							<span class="glyphicon glyphicon-saved" aria-hidden="true"> Save</span>
						</button>
					</div>
				</div>
			</form>
		</div>
		<div ng-show="addVersionView">
			<h3 ng-show="addVersionView">Add module to assembly</h3>
			<form role="form" ng-submit="saveVersion()">
				<div>
					<label>Assembly: {{assembly.name}}</label>
				</div>
				<div class="form-group margin-form" style="width:300px;">
					<label for="version" required>Module version:</label>
					<select ng-options="version.label for version in versions track by version.id"
							name="version" id="version" class="form-control" 
							ng-model="version" ng-change="versionChange()">
					</select>
				</div>
				<div class="form-group margin-form" style="width:300px;">
					<label >Influensers:</label>
					<table class="table table-bordered">
						<thead>
							<tr>
								<th>Dependency ID</th>
								<th>Description</th>
								<th>Influencer</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="dependency in dependencies">
								<td>{{dependency.id}}</td>
								<td>{{dependency.description}}</td>
								<td>{{dependency.influencerVersion.label}}</td>
							</tr>
						</tbody>
					</table>
				</div>
				<p></p>
				<div class="row form-group margin-form">
					<div class="col-lg-6 text-right">
						<button ng-click="cancelVersion()" type="button" class="btn btn-success">
							<span class="glyphicon glyphicon-arrow-left" aria-hidden="true"> Back</span>
						</button>
					</div>
					<div class="col-lg-6 text-left">
						<button type="submit" class="btn btn-success">
							<span class="glyphicon glyphicon-saved" aria-hidden="true"> Save</span>
						</button>
					</div>
				</div>
			</form>
		</div>
    </div>
</div>